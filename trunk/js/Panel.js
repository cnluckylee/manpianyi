BizQQWPA.define("util.domain",function(){var c={},b=document.domain;try{c.url=location.href}catch(a){c.url=""}c.topDomain=function(){var d=/\.(?:(?:edu|gov|com|org|net)\.cn|co\.nz)$/,f=/^[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d$/,e=d.test(b)?-3:f.test(b)?0:-2;return b.split(".").slice(e).join(".")}();c.domain=function(){var d=/(?::[\/]{2}|:[\\]{3})([a-zA-Z0-9_\.]+)/;try{var f=d.exec(c.url);return f?f[1]||b:b}catch(e){return b}}();return c});BizQQWPA.define("wpa.wpaMgr","globalSettings,lang.each,util.proxy,util.titleFlash,util.report,util.serialize,util.domain,wpa.WPA",function(a){var b=a("globalSettings"),g=a("each"),e=a("proxy"),i=a("titleFlash"),d=a("report"),h=a("serialize"),c=a("domain"),j=a("WPA");var f=function(m){var l="http://promreport.crm2.qq.com/wpadisplay/r.gif?",n=["wty","type","nameAccount","kfuin","ws","aty","a","title","wording","wording2"],k={version:b.version};g(n,function(){k[this]=typeof m[this]==="undefined"?"":m[this]});d(l+h(k))};return{newWPA:function(l){var k=l.nameAccount;if(!k){return}f(l);return new j(l)},invite:function(o,k){var l=this,n=function(){i.on("\u3010\u60A8\u6709\u65B0\u4FE1\u606F\u3011");o.insert=function(r){var q=document.getElementsByTagName("body")[0];q.insertBefore(r,q.firstChild)};l.newWPA(o)};if(!k){n();return}try{var p=e({params:o},j.prototype.launchChat);window[k]&&window[k](p,o.msg)}catch(m){n()}}}});BizQQWPA.define("wpa.visitor","util.log,util.speedReport,util.getJSONP,util.domain,util.pubSub,wpa.filter,wpa.ta,wpa.invite,wpa.wpaMgr,wpa.ta,wpa.kfuin",function(l){var f=l("invite"),a=l("domain"),i=l("filter"),k=l("getJSONP"),d=l("pubSub"),b=l("log"),j=l("speedReport"),c=l("ta"),h=l("kfuin");var e=1;var g="http://visitor.crm2.qq.com/cgi/visitorcgi/ajax/wpa_first_heart_beat.php";return function(o){var r=o.nameAccount;if(!r||r==="undefined"){return}if(f.isLoaded(r)||!i.TA){return}var p,n,m=function(t,s){if(!t||!s){return}if(s.block===e){return}if(i.CRM){s.di=o.di;s.kfuin=o.kfuin;b(r+" try launch slave");f.load(r,t,s)}};d.one("TA.loaded",function(s){p=s;m(p,n)});d.one("Invite.first",function(s){n=s;m(p,n)});c(r,a.topDomain,function(s){d.pub("TA.loaded",s)});var q={nameAccount:r,dm:a.topDomain,title:document.title,url:location.href.split("://")[1].split("?")[0]};k(g,q,function(s){d.pub("Invite.first",s)});o.kfuin&&h.set(r,o.kfuin)}});BizQQWPA.define("wpa.kfuin","util.getJSONP",function(c){var b=c("getJSONP");var a="http://wpl.b.qq.com/cgi/conv.php";var d={};return{get:function(e,f){f=f||function(){};if(!e||d[e]){f(d[e]);return}var g={num:e};b(a,g,function(i){if(!i||i.r!==0){f();return}var h=d[e]=i.data.kfuin;f(h)})},set:function(f,e){d[f]=e}}});BizQQWPA.define("util.proxy",function(){return function(b,a){return function(){return a.apply(b,arguments)}}});BizQQWPA.define("util.titleFlash","util.taskMgr",function(a){var b=120;var e=a("taskMgr");var c=document,d=c.title,f=e.newTask(function(){var g=c.title;c.title=g.substr(1,g.length)+g.substr(0,1)},b);return titleFlash={on:function(g){c.title=g+(""+c.title);f.run()},off:function(){f.pause();c.title=d}}});BizQQWPA.define("util.cookie",function(){var a=document;return{set:function(c,e,d,g,b){if(b){b=new Date(+new Date()+b)}var f=c+"="+escape(e)+((b)?"; expires="+b.toGMTString():"")+((g)?"; path="+g:"")+((d)?"; domain="+d:"");if(f.length<4096){a.cookie=f}},get:function(c){var b=a.cookie.match(new RegExp("(^| )"+c+"=([^;]*)(;|$)"));if(b!=null){return unescape(b[2])}return null},del:function(b,c,d){if(this.get(b)){a.cookie=b+"="+((d)?"; path="+d:"")+((c)?"; domain="+c:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}},find:function(b){return a.cookie.match(b).split(",")}}});BizQQWPA.define("wpa.WPA","globalSettings,lang.browser,lang.typeEnhance,util.proxy,util.pad,util.Bits,util.getScript,util.getJSONP,util.domain,util.events,util.onLoad,util.offset,util.report,util.log,util.speedReport,wpa.SelectPanel,util.onIframeLoaded,util.GUID,wpa.getQQVersion,wpa.ViewHelper,wpa.views,wpa.ta,wpa.kfuin,wpa.sid",function(aO){var X=aO("globalSettings"),ad=aO("proxy"),at=aO("typeEnhance"),aE=aO("pad"),ac=aO("Bits"),an=aO("getScript"),aw=aO("getJSONP"),aF=aO("domain"),ay=aO("events"),ae=aO("onLoad"),aP=aO("browser"),ai=aO("offset"),aa=aO("report"),aK=aO("log"),aS=aO("speedReport"),ag=aO("GUID"),aD=aO("SelectPanel"),af=aO("onIframeLoaded"),aC=aO("getQQVersion"),ax=aO("ViewHelper"),aR=aO("views"),aN=aO("ta"),ab=aO("kfuin"),Z=aO("sid");var aT=window;var Y="0",av="1",aI="2",aH="3",aJ="4",au="20",am="0",aG="1",aL="2",al="0",aA="1",ao="0",ap="1",ah="2",aB="0",aj="1",ak="2",aq="0",az="1",aQ="1",ar="2";var aU=0.1;var aM=function(b){this.params=b;this.insert=b.insert;this.wty=b.wty;var c=this,a=this.nameAccount=b.nameAccount,d=this.kfuin=b.kfuin;switch(this.wty){case av:this.render();break;case aH:this.custom()}!this.kfuin&&ab.get(a,function(e){e&&(c.kfuin=e)});!this.sid&&Z.get(a,function(e){e&&(c.sid=e)});aa("http://promreport.crm2.qq.com/se/r.gif?ref="+encodeURIComponent(document.referrer))};aM.prototype={render:function(){var a=this.params;var b,d,c=parseInt(a.type),e,f=false;switch(c){case 1:e="a01";b=92;d=22;break;case 2:e="a02";b=77;d=22;break;case 10:e="b01";b=93;d=151;f=true;break;case 11:e="b02";b=327;d=172;f=true;break;case 12:e="b03";b=121;d=277;f=true;break;case 20:e="i01";b=327;d=172;f=true;break;case 30:e="d01";b=a.txw;d=a.txh;f=true;break}this.type=e;this.width=b;this.height=d;this.createWPA();if((c>9&&c<14)||c===20||c===30){this.initFloatWPA()}},createWPA:function(){var c=aS("7818","21","1");var h=this,i=this.type,d=this.width,f=this.height,g=aR[i];var b;try{b=document.createElement('<iframe scrolling="no" frameborder="0" width="'+d+'" height="'+f+'" allowtransparency="true" src="about:blank"></iframe>')}catch(j){b=document.createElement("iframe");b.width=d;b.height=f;b.setAttribute("scrolling","no");b.setAttribute("frameborder",0);b.setAttribute("allowtransparency",true);b.setAttribute("src","about:blank")}this.node=b;this.insert(b);if(aP.msie){try{var e=b.contentWindow.document}catch(j){b.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close()})())"}}var a=function(){var m=b.contentWindow,n=b.contentDocument||m.document;n.open();n.write(['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">','<html xmlns="http://www.w3.org/1999/xhtml">',"<head>",'<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',aP.msie&&b.src!=="about:blank"?"<script>document.domain='"+document.domain+"';<\/script>":"","</head>","<body>",g.templ,"</body>","</html>"].join(""));n.close();var k=new ax(n,h);g.init(n,k);var l=1;c.addPoint(l).send(aU)};af(b,a)},initFloatWPA:function(){var b=window.document,a=this.params,e=parseInt(a.type),c=this.node,d=this.width,g=this.height;c.style.cssText=["display:none;","position:absolute;",e===20?"z-index:2147483647!important;":"z-index:2147483646!important;"].join(" ");ae(f);function f(){var i=c.style,j=aP.msie,l=parseInt(aP.version,10),h=b.compatMode==="BackCompat";i.position=parseInt(a.fsty,10)==0?"fixed":"absolute";if(parseInt(a.fposX)==0){i.left=8+"px";i.right="auto";i.marginLeft=0}else{if(parseInt(a.fposX)==1){i.left="50%";i.right="auto";i.marginLeft="-"+parseInt(d/2)+"px"}else{i.left="auto";i.right=8+"px";i.marginLeft=0}}if(parseInt(a.fposY)==0){i.top=8+"px";i.bottom="auto";i.marginTop=0}else{if(parseInt(a.fposY)==1){i.top="50%";i.bottom="auto";i.marginTop="-"+parseInt(g/2)+"px"}else{i.top="auto";i.bottom=8+"px";i.marginTop=0}}if((j&l<7)||h){i.position="absolute";if(parseInt(a.fsty)==0){i.marginTop=0;var k;if(parseInt(a.fposY)==0){k=8}else{if(parseInt(a.fposY)==1){k=(ai.getClientHeight(b)-g)/2}else{k=ai.getClientHeight(b)-g-8}}setInterval(function(){i.top=ai.getScrollTop(b)+k+"px"},128)}}i.display="block"}},custom:function(){ay.addEvent(this.params.node,"click",ad(this,this.launchChat))},remove:function(){var a=this.node;a.parentNode.removeChild(a)},launchChat:function(b){if(aP.isIOS||aP.isAndroid){this.launchMobileChat();return}var c=this,a=aS("7818","21","2"),d=this.params.chatType;if(d==ar){c.launchAnonymousChat(b);return}if(d==aQ){c.launchAIOChat(b);return}aC(function(e){a.addPoint(7).send();c.launchAIOChat(b);if(e){return}new aD({onAIOChat:function(){c.launchAIOChat(b)},onAnonyChat:function(){c.launchAnonymousChat(b)}})})},launchMobileChat:function(){var a=this.params.nameAccount;ab.get(a,function(e){var d="mqqwpa://im/chat?chat_type=wpa&uin="+e+"&version=1&src_type=web&web_src=http://"+aF.domain,b=+new Date(),c=document.createElement("div");c.style.visibility="hidden";c.style.width=0;c.style.height=0;c.innerHTML='<iframe id="schema" src="'+d+'" scrolling="no" width="0" height="0"></iframe>';document.body.appendChild(c);setTimeout(function(){var f=+new Date()-b;if(f<1000){location.href="http://wpd.b.qq.com/page/info.php?nameAccount="+a}document.body.removeChild(c)},500)})},launchAIOChat:function(){var a=document.createElement("iframe"),b=document.getElementsByTagName("body")[0];a.style.display="none";b.insertBefore(a,b.firstChild);return function(c){var d=this.params,h=this.kfuin,f={na:d.nameAccount,kfuin:h,aty:d.aty,a:d.a,sid:this.sid,uid:aN.uid,url:aF.url,title:document.title,dm:aF.topDomain,clkSrc:d.clkSrc||"",ext:d.ext||""},g=ag();var e=aS("7818","21","2");aw("http://wpd.b.qq.com/cgi/get_sign.php",f,function(k){if(!k||k.r!==0||!k.data){return}a.src=k.data.sign;var l=false,j=function(){if(l){return}l=true;at.isFunction(c)&&c(d);var m=k.data.clkID;e.addPoint(5).send();aa("http://promreport.crm2.qq.com/wpaclick/r.gif?ty=1&kfuin="+h+"&version="+X.version+"&browser="+encodeURIComponent(navigator.userAgent)+"&bfrom=1&appointType="+d.aty+"&appoint="+d.a+"&clkID="+m+"&guid="+g);aT.taClick&&aT.taClick(m,"clickid")};af(a,j);if(aP.msie){var i=function(){setTimeout(function(){if(l){return}/interactive/.test(a.readyState)?j():i()},500)};i()}});aa("http://promreport.crm2.qq.com/wpaclickorg/r.gif?kfuin="+h+"&version="+X.version+"&browser="+encodeURIComponent(navigator.userAgent)+"&bfrom=1&appointType="+d.aty+"&appoint="+d.a+"&guid="+g)}}(),launchAnonymousChat:function(a){var c=this.params,b=aS("7818","21","2"),e="http://wpd.b.qq.com/page/webchat.html?nameAccount="+this.nameAccount,d=window.open(e,"_blank","height=516, width=598,toolbar=no,scrollbars=no,menubar=no,status=no,location=no");at.isFunction(a)&&a(c);aa("http://promreport.crm2.qq.com/wpaclick/r.gif?ty=2&kfuin="+this.kfuin+"&version="+X.version+"&browser="+encodeURIComponent(navigator.userAgent)+"&bfrom=1&appointType="+c.aty+"&appoint="+c.a);d.onload=function(){b.addPoint(6).send()}}};return aM});BizQQWPA.define("util.getJSONP","util.getScript,util.serialize",function(e){var f=e("getScript"),h=e("serialize");var g=0;return function(c,d,a){var b="JSONP_CALLBACK_"+ ++g+"_"+Math.round(Math.random()*100),j;d.cb=b;c+=c.indexOf("?")===-1?"?":"&";c+=h(d);j=f(c);window[b]=function(i){a(i);setTimeout(function(){window[b]=null;j.parentNode.removeChild(j)},1)}}});BizQQWPA.define("wpa.filter","util.domain",function(b){var e="",d="qq.com,pengyou.com,qzoneapp.com,nipic.com,docin.com,51zxw.net,2155.com,xd.com,yto.net.cn,c-c.com,27.cn,05wan.com,alivv.cn,gogo.com,doctorjob.com.cn,emoney.cn,m4.cn,chinaktv.net,yk988.com,bangkaow.com,wsxsp.com,55tools.com,youxi518.com",a="b.qq.com,sales.b.qq.com,guilin.house.qq.com,ta.qq.com,hn.qq.com,nantong.house.qq.com";var c=b("domain");return{TA:function(){var i=c.topDomain,h=/^[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d$/,g=/^localhost$/,f=/^wpa\.b\.qq\.com/;return e.indexOf(i)===-1&&!h.test(i)&&!g.test(i)&&!f.test(c.domain)}(),CRM:function(){try{var j=new RegExp("(^|,)"+c.domain);if(j.test(a)){return true}var i=c.topDomain,h=new RegExp("(^|,)"+i),g=/^[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d$/,k=/^localhost$/;return !h.test(d)&&!g.test(i)&&!k.test(i)}catch(f){}}()}});BizQQWPA.define("wpa.ta","util.getScript,util.serialize,util.cookie",function(a){var e="http://tajs.qq.com/crmqq.php",f="pgv_pvi";var d=a("getScript"),c=a("serialize"),b=a("cookie");var h=false;var g=function(j,i,k){var n=false;if(g.uid){k(g.uid);n=true}if(!h){var m={uid:j,dm:i},l=e+"?"+c(m,"=","&");d(l,function(){h=true;if(n){return}g.uid=b.get(f);if(g.uid){k(g.uid)}else{setTimeout(arguments.callee,30)}})}};g.uid=b.get(f)||"";return g});BizQQWPA.define("wpa.invite","util.log,util.getJSONP,util.proxy,util.domain,util.blockStorage,util.taskMgr,wpa.wpaMgr",function(ab){var H=2000,l=1000,O=2000,Y=2000,N=5000,w=15000,h=3600000,u=1000;var C="is",i="ik",X="msg",b="mh",e="mid",L="slid";var M="0",v="1",S="2",p="0",V="-1",U="|";var G="http://visitor.crm2.qq.com/cgi/visitorcgi/ajax/wpa_heart_beat.php",r="http://visitor.crm2.qq.com/cgi/visitorcgi/ajax/auto_invite.php";var I=0,a="0",s="1",E="2",Z=1;var t="0",Q="1",B="2",A="4",T="20",f="0",D="1",y="2",R="4",W="5";var g="0",j="1",d="1",c="0",K="1";var z=ab("log"),P=ab("getJSONP"),q=ab("proxy"),F=ab("domain"),x=ab("blockStorage"),aa=ab("taskMgr"),o=ab("wpaMgr");var n=function(ad,ac,ae){this.nameAccount=ad;this.uid=ac;this.config=ae;this.genID();this.storage=x(ad);this.monitors={master:aa.newTask(q(this,this.masterMonitor),H).run(),invite:aa.newTask(q(this,this.inviteMonitor),l).run()};this.heartBeat=aa.newTask(q(this,this.heartBeatProcess),Y).run();this.setActive();window.onfocus=q(this,this.setActive);z("slave "+this.id+" launched!")};n.prototype={genID:function(){this.id="slid_"+ +new Date()%1000+"_"+Math.round(Math.random()*100)},masterMonitor:function(){if(J[this.nameAccount]){return}z("monitoring mater state");var ac=this.storage.get(b)||0,ad=+new Date()-parseInt(ac);z("gap of master is "+ad);if(ad>3*O){this.recoverMaster()}},recoverMaster:function(){J[this.nameAccount]=new m(this.nameAccount,this.uid,this.config);z("recover master by slave "+this.id)},inviteMonitor:function(){if(this.isInvited()){this.kill()}else{if(this.isInviting()){if(this.isActive()){this.invite()}}}z("slave "+this.id+" monitoring invite state")},kill:function(){this.monitors.invite.drop();this.heartBeat.drop();var ad=this.storage,ac=[this.id];for(var af=0,ae;ae=ac[af++];){ad.del(ae)}z("slave "+this.id+" killed")},invite:function(){var ac=this.storage.get(i);var ad={wty:Q,nameAccount:this.nameAccount,kfuin:this.config.kfuin,type:T,aty:ac?(ac===p?R:W):R,a:ac||"",iv:K,fsty:g,fposX:d,fposY:j,sv:A,uid:this.uid,dm:F.topDomain,msg:this.storage.get(X)};o.invite(ad,this.config.di);this.storage.set(C,S);z("invited by slave "+this.id)},heartBeatProcess:function(){var ad=this.storage,ac=ad.get(L);if(!ac){ad.set(L,this.id+"|")}else{if(ac.indexOf(this.id+"|")===-1){ad.set(L,this.id+"|"+ac)}}ad.set(this.id,+new Date())},setActive:function(){var ad=this.storage,ac=ad.get(L)||"",ae=this.id+U;if(ac.indexOf(this.id)>-1){ac=ac.replace(ae,"")}ac+=ae;ad.set(L,ac)},isActive:function(){var ac=this.storage.get(L);if(!ac){return false}return ac.substr(0,ac.length-1).split(U).pop()===this.id},isInvited:function(){return this.storage.get(C)===S},isInviting:function(){return this.storage.get(C)===v}};var J={};var m=function(ad,ac,ae){this.nameAccount=ad;this.uid=ac;this.config=ae;this.storage=x(ad);this.genID();this.sleep=false;this.heartBeatURl=ae.hbDomain||G;this.storage.set(e,this.id);this.heartBeatProcess();this.heartBeat=aa.newTask(q(this,this.heartBeatProcess),O).run();this.initWithConfig();z("master launched!")};m.prototype={genID:function(){this.id=+new Date()%1000+"_"+Math.round(Math.random()*100)},setInviteState:function(ac,ae,ad){if(ac===v){this.storage.set(i,ae);this.storage.set(X,ad)}this.storage.set(C,ac)},isInvited:function(){var ac=this.storage.get(C)===S;if(ac){this.recycle();this.isInvited=function(){return true}}return ac},initWithConfig:function(){var ac=this.config;if(ac.r!==I){this.storage.set(b,V);return}if(ac.isAuto===Z){this.storage.set(X,ac.autoMsg);this.autoInviteTimer=setTimeout(q(this,function(){this.autoInvite()}),ac.autoTime*1000)}this.monitors={slave:aa.newTask(q(this,this.slaveMonitor),Y).run(),server:aa.newTask(q(this,this.serverMonitor),N).run(),sleep:aa.newTask(q(this,this.sleepMonitor),h).run()};z("master inited with config")},autoInvite:function(){if(this.isInvited()){return}var ad={nameAccount:this.nameAccount,uid:this.uid};var ac=this.monitors.server;ac.pause();P(r,ad,q(this,function(ae){if(ae.r!==I){ac.run();return}if(!this.isInvited()){this.setInviteState(v,p,this.storage.get(X));aa.once(function(){ac.run()},5000).run()}}))},ajustServerMonitorGap:function(ac){this.monitors.server.setGap(Math.min(Math.max(N,ac),w))},serverMonitor:function(){var ad=this.storage.get(C);if(this.sleep){return}var ac={nameAccount:this.nameAccount,uid:this.uid};if(ad===v){ac.inviteState=s}if(ad===S){ac.inviteState=E}P(this.heartBeatURl,ac,q(this,function(ae){if(ae.r!==I){return}if(ae.gap){this.ajustServerMonitorGap(ae.gap*1000)}if(ae.inviteState===a){return}if(ae.inviteState===s){this.setInviteState(v,ae.kfext,ae.inviteMsg);return}if(ae.inviteState===E){this.setInviteState(S)}}))},slaveMonitor:function(){if(this.isInvited()){this.monitors.slave.drop()}var ae=this.storage,af=ae.get(L);if(!af){return}af=af.split(U);var ac="",aj=+new Date(),ai,ag,ad;for(var ah=0;ag=af[ah++];){z("monitoring slave "+ag+" state");ai=ae.get(ag)||0;ad=aj-parseInt(ai);z("gap of slave "+ag+" is "+ad);if(ad>3*Y){ae.del(ag);z("clear slave "+ag+" in storage")}else{ac+=ag+U}}ae.set(L,ac)},sleepMonitor:function(){var ac=this.storage.get(L)||"",ad=ac.substr(0,ac.length-1).split(U).pop();if(this.sleep){if(this.activeSlave!==ad){this.activeSlave=ad;this.sleep=false;this.monitors.sleep.setGap(h)}}else{if(this.activeSlave===ad){this.sleep=true;this.monitors.sleep.setGap(u)}else{this.activeSlave=ad}}},kill:function(){J[this.nameAccount]=undefined;if(this.monitors){this.monitors.server.drop();this.monitors.slave.drop();this.heartBeat.drop();clearTimeout(this.autoInviteTimer)}z("master killed")},recycle:function(){var ad=this.storage,ac=[i,X];for(var af=0,ae;ae=ac[af++];){ad.del(ae)}z("storage recycled")},heartBeatProcess:function(){var ac=this.storage;if(ac.get(e)!==this.id){this.kill();return false}this.storage.set(b,+new Date())}};var k={};return{load:function(ad,ac,ae){if(this.isLoaded(ad)){z(ad+" slave already running");return}var af=new n(ad,ac,ae);k[ad]?k[ad].push(af):k[ad]=[af]},isLoaded:function(ac){return typeof k[ac]!=="undefined"}}});BizQQWPA.define("util.taskMgr","util.proxy",function(e){var c="run",b="pause",h="drop",g=50;var f=e("proxy");var d=function(){this.circle=[];this.pos=0;setInterval(f(this,this.loop),16)};d.prototype={newTask:function(i,j){var k=new a(i,j);this.circle.push(k);return k},once:function(i,j){return this.newTask(function(){i.apply(this);this.drop()},j)},loop:function(){var k=this.circle,j=this.pos,n=k.length,i=+new Date(),m=g,l=k[j];while(n>0&&+new Date()-i<m){if(l.isRunning()){l.execute()}else{if(l.isDropped()){k.splice(j,1);j--}}j=(j+1)%k.length;l=k[j];n--}this.pos=j}};var a=function(i,j){this.fn=i;this.gap=j;this.status=b;this.lastExecTime=+new Date()};a.prototype={run:function(){this.status=c;return this},pause:function(){this.status=b;return this},drop:function(){this.status=h;return this},execute:function(){if(+new Date()-this.lastExecTime<this.gap){return false}this.fn();this.lastExecTime=+new Date();return true},getGap:function(){return this.gap},setGap:function(i){this.gap=i;return this},isRunning:function(){return this.status===c},isPaused:function(){return this.status===b},isDropped:function(){return this.status===h}};return new d()});BizQQWPA.define("lang.browser",function(){var g=navigator.userAgent.toLowerCase();var h={};var e=/(chrome)[ \/]([\w.]+)/.exec(g)||/(webkit)[ \/]([\w.]+)/.exec(g)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(g)||/(msie) ([\w.]+)/.exec(g)||g.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(g)||[];var f={browser:e[1]||"",version:e[2]||"0"};if(f.browser){h[f.browser]=true;h.version=f.version}if(h.chrome){h.webkit=true}else{if(h.webkit){h.safari=true}}h.isMobile=g.match(/(nokia|iphone|android|motorola|^mot\-|softbank|foma|docomo|kddi|up\.browser|up\.link|htc|dopod|blazer|netfront|helio|hosin|huawei|novarra|CoolPad|webos|techfaith|palmsource|blackberry|alcatel|amoi|ktouch|nexian|samsung|^sam\-|s[cg]h|^lge|ericsson|philips|sagem|wellcom|bunjalloo|maui|symbian|smartphone|midp|wap|phone|windows ce|iemobile|^spice|^bird|^zte\-|longcos|pantech|gionee|^sie\-|portalmmm|jig\s browser|hiptop|^ucweb|^benq|haier|^lct|opera\s*mobi|opera\*mini|320x320|240x320|176x220)/i);h.isWindow=/windows|win32/.test(g);h.isMac=/Mac/.test(g);h.isIOS=/(?:iphone|ipad|ipod)/i.test(g);h.isAndroid=/android/i.test(g);return h});BizQQWPA.define("util.pad",function(){return function(d,b,f,c){var a=f-d.length,e;if(c===false){for(e=0;e<a;e++){d+=b}}else{for(e=0;e<a;e++){d=b+d}}return d}});BizQQWPA.define("util.Bits","util.proxy,util.pad",function(b){var c=b("proxy"),a=b("pad");return function(){var e=function(h,g,f){return h.replace(new RegExp("(^[\\d]{"+g+"})\\d"),"$1#"+f).replace("#","")};var d=function(f){this.bits=f};d.prototype={pad:function(){var f=Array.prototype.slice.call(arguments);this.bits=a.apply(this,[this.bits].concat(f));return this},padLeft:function(){return c(this,this.pad)},padRight:function(){var f=Array.prototype.slice.call(arguments).push(false);return this.pad.apply(this,f)},getChar:function(f){return this.bits.charAt(f)},setChar:function(f,g){this.bits=e(this.bits,f,g);return this},reverse:function(){var h=this.bits,g=h.length;for(var f=0;f<g;f++){this.setChar(f,parseInt(h[f],2)^1)}return this}};return d}()});BizQQWPA.define("util.events",function(){var a={};a.addEvent=window.addEventListener?function(d,b,c){d.addEventListener(b,c);return d}:function(d,b,c){d.attachEvent("on"+b,c);return d};a.removeEvent=window.removeEventListener?function(d,b,c){d.removeEventListener(b,c);return d}:function(d,b,c){d.detachEvent("on"+b,c);return d};return a});BizQQWPA.define("util.onLoad","util.events",function(a){var b=a("events");return onLoad=function(d,c){c=c||window;if(/loaded|complete|undefined/.test(c.document.readyState)){d()}else{b.addEvent(c,"load",d)}return c}});BizQQWPA.define("util.offset",function(){var b=document,a=b.compatMode=="CSS1Compat",d=b.documentElement,c=b.body;return{getScrollTop:function(){return Math.max(d.scrollTop,c.scrollTop)},getClientWidth:function(){return a?d.clientWidth:c.clientWidth},getClientHeight:function(){return a?d.clientHeight:c.clientHeight}}});BizQQWPA.define("util.Panel","lang.browser,util.Style,util.className,util.events,util.offset,util.css,util.proxy",function(i){var g=i("Style"),c=i("className"),h=i("events"),j=i("offset"),a=i("browser"),b=i("css"),d=i("proxy");var e={container:document.getElementsByTagName("body")[0],template:['<div class="WPA3-CONFIRM">','<h3 class="WPA3-CONFIRM-TITLE"><%=title%></h3>','<div class="WPA3-CONFIRM-CONTENT"><%=content%></div>','<div class="WPA3-CONFIRM-PANEL"><%=buttons%></div>','<div class="WPA3-CONFIRM-CLOSE"></div>',"</div>"].join(""),buttonTemplate:['<a href="javascript:;" class="WPA3-CONFIRM-BUTTON"><span class="WPA3-CONFIRM-BUTTON-PADDING WPA3-CONFIRM-BUTTON-LEFT"></span><span class="WPA3-CONFIRM-BUTTON-TEXT"><%=text%></span><span class="WPA3-CONFIRM-BUTTON-PADDING WPA3-CONFIRM-BUTTON-RIGHT"></span></a>'].join(""),cssText:[".WPA3-CONFIRM { z-index:2147483647; width:285px; height:141px; margin:0; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAR0AAACNCAMAAAC9pV6+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjU5QUIyQzVCNUIwQTExRTJCM0FFRDNCMTc1RTI3Nzg4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjU5QUIyQzVDNUIwQTExRTJCM0FFRDNCMTc1RTI3Nzg4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTlBQjJDNTk1QjBBMTFFMkIzQUVEM0IxNzVFMjc3ODgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NTlBQjJDNUE1QjBBMTFFMkIzQUVEM0IxNzVFMjc3ODgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6QoyAtAAADAFBMVEW5xdCkvtNjJhzf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) no-repeat;}",".WPA3-CONFIRM { *background-image:url(http://combo.b.qq.com/crm/wpa/src/wpa/views/panel.png);}",'.WPA3-CONFIRM * { position:static; z-index:auto; top:auto; left:auto; right:auto; bottom:auto; width:auto; height:auto; max-height:auto; max-width:auto; min-height:0; min-width:0; margin:0; padding:0; border:0; clear:none; clip:auto; background:transparent; color:#333; cursor:auto; direction:ltr; filter:; float:none; font:normal normal normal 12px "Helvetica Neue", Arial, sans-serif; line-height:16px; letter-spacing:normal; list-style:none; marks:none; overflow:visible; page:auto; quotes:none; -o-set-link-source:none; size:auto; text-align:left; text-decoration:none; text-indent:0; text-overflow:clip; text-shadow:none; text-transform:none; vertical-align:baseline; visibility:visible; white-space:normal; word-spacing:normal; word-wrap:normal; -webkit-box-shadow:none; -moz-box-shadow:none; -ms-box-shadow:none; -o-box-shadow:none; box-shadow:none; -webkit-border-radius:0; -moz-border-radius:0; -ms-border-radius:0; -o-border-radius:0; border-radius:0; -webkit-opacity:1; -moz-opacity:1; -ms-opacity:1; -o-opacity:1; opacity:1; -webkit-outline:0; -moz-outline:0; -ms-outline:0; -o-outline:0; outline:0; -webkit-text-size-adjust:none;}',".WPA3-CONFIRM * { font-family:Microsoft YaHei,Simsun;}",".WPA3-CONFIRM .WPA3-CONFIRM-TITLE { height:40px; margin:0; padding:0; line-height:40px; color:#2b6089; font-weight:normal; font-size:14px; text-indent:80px;}",".WPA3-CONFIRM .WPA3-CONFIRM-CONTENT { height:55px; margin:0; line-height:55px; color:#353535; font-size:14px; text-indent:29px;}",".WPA3-CONFIRM .WPA3-CONFIRM-PANEL { height:30px; margin:0; padding-right:16px; text-align:right;}",".WPA3-CONFIRM .WPA3-CONFIRM-BUTTON { position:relative; display:inline-block!important; display:inline; zoom:1; width:99px; height:30px; margin-left:10px; line-height:30px; color:#000; text-decoration:none; font-size:12px; text-align:center;}",".WPA3-CONFIRM .WPA3-CONFIRM-BUTTON-FOCUS { width:78px;}",".WPA3-CONFIRM .WPA3-CONFIRM-BUTTON .WPA3-CONFIRM-BUTTON-TEXT { line-height:30px; text-align:center; cursor:pointer;}",".WPA3-CONFIRM-CLOSE { position:absolute; top:7px; right:7px; width:10px; height:10px; cursor:pointer;}"].join(""),buttons:[{isFocus:true,text:"\u786E\u8BA4",events:{click:function(){this.remove()}}},{text:"\u53D6\u6D88",events:{click:function(){this.remove()}}}],modal:true};g.add("_WPA_CONFIRM_STYLE",e.cssText);var f=function(k){this.opts=k;this.render()};f.prototype={render:function(){var k=this,l=this.opts,q=this.container=l.container||document.getElementsByTagName("body")[0];var p=l.template||e.template,o="WPA_BUTTONS_PLACE"+(+new Date()%100)+Math.floor(Math.random()*100);p=p.replace(/<%=title%>/g,l.title||"").replace(/<%=content%>/g,l.content||"").replace(/<%=buttons%>/g,'<div id="'+o+'"></div>');var n=document.createElement("div"),m;n.innerHTML=p;this.$el=m=n.firstChild;h.addEvent(m.lastChild,"click",function(){k.remove();l.onClose&&l.onClose()});(function(){try{q.appendChild(m)}catch(r){setTimeout(arguments.callee,1);return}if(l.modal||e.modal){k.renderModal()}k.renderButtons(o);k.setCenter()})()},renderButtons:function(o){var r=document.getElementById(o),t=r.parentNode;t.removeChild(r);var m=this.opts.buttons||e.buttons,p=this.opts.buttonTemplate||e.buttonTemplate,l=document.createElement("div"),v,n,k;for(var s=0,q=m.length;s<q;s++){n=m[s];l.innerHTML=p.replace("<%=text%>",n.text);v=l.firstChild;n.isFocus&&c.addClass(v,"WPA3-CONFIRM-BUTTON-FOCUS");if(n.events){k=n.events;for(var u in k){if(k.hasOwnProperty(u)){h.addEvent(v,u,d(this,k[u]))}}}t.appendChild(v)}},renderModal:function(){var l=this.container,m=b(l,"width"),k=b(l,"height"),p=b(l,"overflow");var q=document.createElement("div"),n={position:"fixed",top:0,left:0,zIndex:2147483647,width:j.getClientWidth()+"px",height:j.getClientHeight()+"px",backgroundColor:"black",opacity:0.3,filter:"alpha(opacity=30)"};var o=document.compatMode==="BackCompat";if((a.msie&&parseInt(a.version,10)<7)||o){n.position="absolute";setInterval(d(q,function(){this.style.top=j.getScrollTop()+"px"}),128)}b(q,n);l.insertBefore(q,this.$el);this.modal=q;h.addEvent(window,"resize",d(q,function(){b(this,{width:j.getClientWidth()+"px",height:j.getClientHeight()+"px"})}))},show:function(){this.css("display","block");this.modal&&b(this.modal,"display","block");return this},hide:function(){this.css("display","none");this.modal&&b(this.modal,"display","none");return this},remove:function(){this.$el.parentNode.removeChild(this.$el);this.modal&&this.modal.parentNode.removeChild(this.modal);return this},css:function(){var k=[this.$el].concat(Array.prototype.slice.call(arguments));return b.apply(this,k)},setCenter:function(){this.css({position:"absolute",top:"50%",left:"50%"});var m={position:"fixed",marginLeft:"-"+this.outerWidth()/2+"px",marginTop:"-"+this.outerHeight()/2+"px"};var k=document.compatMode==="BackCompat";if((a.msie&&parseInt(a.version,10)<7)||k){m.position="absolute";m.marginTop=0;var l=m.top=(j.getClientHeight()-this.outerHeight())/2;setInterval(d(this.$el,function(){this.style.top=j.getScrollTop()+l+"px"}),128)}this.css(m)},outerWidth:function(){return this.$el.offsetWidth},outerHeight:function(){return this.$el.offsetHeight}};return f});